<!DOCTYPE html>
<html lang="es">
<head>
  {% load static %}
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="shortcut icon" href="{% static 'img/logo-marema.png' %}" type="image/x-icon">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
  <title>Valoraciones por Clase - Tecno Marema</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background-color: #000;
      color: white;
      margin: 0;
      padding: 20px;
    }

    body {
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      color: #fff;
      font-family: 'Segoe UI', sans-serif;
    }

    .navbar {
      background-color: #111;
    }

    .nav-link {
      color: #12f693 !important;
    }

    .nav-link.active {
      border-bottom: 2px solid #12f693;
    }

    .container {
      max-width: 1000px;
      margin: auto;
      background-color: #111;
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 0 25px rgba(18, 246, 147, 0.2);
    }

    select {
      background-color: #111;
      color: #12f693;
      border: 1px solid #12f693;
      padding: 10px;
      border-radius: 8px;
      font-size: 1rem;
    }

    .rate-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .rate-score {
      font-size: 2rem;
      color: #00f7ff;
      font-weight: bold;
    }

    .faces {
      display: flex;
      justify-content: space-between;
      text-align: center;
      gap: 15px;
    }

    .face {
      flex: 1;
      background: #111;
      border-radius: 12px;
      padding: 15px;
    }

    .face h3 {
      margin: 10px 0 5px;
    }

    .face.green { color: #12f693; }
    .face.cyan { color: #00f7ff; }
    .face.purple { color: #cf30ff; }

    .bar {
      height: 10px;
      border-radius: 5px;
      margin: 8px 0;
    }

    .bar.green { background: #12f693; }
    .bar.cyan { background: #00f7ff; }
    .bar.purple { background: #cf30ff; }

    .stats {
      display: flex;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 15px;
      margin: 30px 0;
    }

    .stat-box {
      flex: 1;
      min-width: 280px;
      background: #111;
      padding: 20px;
      border-radius: 12px;
      border-left: 4px solid #cf30ff;
    }

    .stat-box h3 {
      font-size: 1.8rem;
      margin: 0 0 10px;
      color: #00f7ff;
    }

    .comments-section {
      background-color: #111;
      border-radius: 12px;
      padding: 20px;
    }

    .comments-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .comments-header h3 {
      margin: 0;
      color: #12f693;
    }

    .filter-select {
      background-color: #111;
      color: #cf30ff;
      border: 1px solid #cf30ff;
      border-radius: 8px;
      padding: 5px 10px;
    }

    .comment {
      display: flex;
      align-items: flex-start;
      gap: 15px;
      padding: 15px 0;
      border-bottom: 1px solid #334155;
    }

    .avatar {
      width: 45px;
      height: 45px;
      border-radius: 50%;
      background: linear-gradient(45deg, #12f693, #cf30ff);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 1.1rem;
      color: black;
    }

    .comment-content {
      flex: 1;
    }

    .comment-content h4 {
      margin: 0;
      font-size: 1rem;
      color: #00f7ff;
    }

    .comment-content p {
      margin: 5px 0 0;
      color: #e2e8f0;
    }

    @media (max-width: 768px) {
      .faces, .stats {
        flex-direction: column;
      }

      .rate-header {
        flex-direction: column;
        gap: 10px;
      }

      .d-flex {
        flex-direction: column !important;
      }
    }
  </style>
</head>
<body>

  <!-- Barra de navegación -->
  <nav class="navbar navbar-dark px-4 py-3 mb-4">
    <span class="navbar-brand fw-bold text-white">Cursos</span>
    <div>
      <a class="nav-link d-inline-block mx-3" href="#">Mis cursos</a>
      <a class="nav-link d-inline-block mx-3 active" href="#">Cursos</a>
      <a class="nav-link d-inline-block mx-3" href="#">Perfil</a>
      <a class="nav-link d-inline-block mx-3" href="#">Cerrar sesión</a>
    </div>
  </nav>

  <div class="container-fluid">
    <h2 class="text-white mb-4">Valoraciones del curso</h2>

    <div class="rate-header">
      <select>
        <option>General del curso</option>
        <option>Clase 0</option>
        <option>Clase 1</option>
        <option>Clase 2</option>
        <option>Clase 3</option>
        <option>Clase 4</option>
        <option>Clase 5</option>
        <option>Clase 6</option>
        <option>Clase 7</option>
        <option>Clase 8</option>
        <option>Clase 9</option>
        <option>Clase 10</option>
        <option>Clase 11</option>
        <option>Clase 12</option>
        <option>Clase 13</option>
        <option>Clase 14</option>
        <option>Clase 15</option>
        <option>Clase 16</option>
        <option>Clase 17</option>
        <option>Clase 18</option>
        <option>Clase 19</option>
        <option>Clase 20</option>
      </select>
      <div class="rate-score">4.2 / 5.0</div>
    </div>

    <div class="faces">
      <div class="face green">
        <div style="font-size: 2rem;">😊</div>
        <h3>Me gustó</h3>
        <div>70%</div>
        <div class="bar green" style="width: 70%;"></div>
        <div>70 votos</div>
      </div>
      <div class="face cyan">
        <div style="font-size: 2rem;">😐</div>
        <h3>Más o menos</h3>
        <div>20%</div>
        <div class="bar cyan" style="width: 20%;"></div>
        <div>20 votos</div>
      </div>
      <div class="face purple">
        <div style="font-size: 2rem;">😠</div>
        <h3>No me gustó</h3>
        <div>10%</div>
        <div class="bar purple" style="width: 10%;"></div>
        <div>10 votos</div>
      </div>
    </div>

    <div class="stats">
      <div class="stat-box">
        <h3>4.2 / 5.0</h3>
        <p>100 de 120 alumnos valoraron esta clase.</p>
        <p>Total: 240 valoraciones en el curso.</p>
      </div>
      <div class="stat-box">
        <h3>82%</h3>
        <p>Porcentaje de alumnos que valoran respecto al total del curso.</p>
      </div>
    </div>
    <!-- Gráficos: rateChart y balanceChart en una misma fila -->
    <div class="d-flex flex-wrap gap-3 mb-4">
      <div style="flex: 1; min-width: 300px; background-color: #111; border-radius: 12px; padding: 20px;">
        <h3 style="color: #12f693; margin-top: 0;">Balance general de valoraciones</h3>
        <canvas id="rateChart"></canvas>
      </div>
      <div style="flex: 1; min-width: 300px; background-color: #111; border-radius: 12px; padding: 20px;">
        <h3 style="color: #12f693; margin-top: 0;">Balance general de valoraciones</h3>
        <canvas id="balanceChart" height="100"></canvas>
      </div>
    </div>

<!-- Gráficos votersChart y pieChart en una misma fila -->
<div class="d-flex flex-wrap gap-3 mb-4">
  <!-- Gráfico de barras: Votantes por clase -->
  <div style="flex: 1; background-color: #111; border-radius: 12px; padding: 20px;">
    <h3 style="color: #12f693;">Alumnos que valoraron por clase</h3>
    <canvas id="votersChart" style="background-color: #111; border-radius: 12px;"></canvas>
  </div>

  <!-- Gráfico de torta: Distribución de valoraciones -->
  <div style="flex: 1; background-color: #111; border-radius: 12px; padding: 20px;">
    <h3 style="color: #12f693;">Distribución de Valoraciones</h3>
    <canvas id="pieChart" style="background-color: #111; border-radius: 12px;"></canvas>
  </div>
</div>

    
    <script>
      const pieCtx = document.getElementById('pieChart').getContext('2d');
    
      new Chart(pieCtx, {
        type: 'pie',
        data: {
          labels: ['Positivas', 'Más o menos', 'Negativas'],
          datasets: [{
            data: [60, 30, 10], // Porcentaje de cada tipo de valoración
            backgroundColor: ['#12f693', '#00f7ff', '#cf30ff'],
            hoverOffset: 10
          }]
        },
        options: {
          responsive: true,
          plugins: {
            legend: {
              position: 'top',
              labels: { color: '#e2e8f0' }
            }
          }
        }
      });
    </script>
    

    <!-- Sección de comentarios -->
    <div class="comments-section">
      <div class="comments-header">
        <h3>Comentarios por clase</h3>
        <select class="filter-select">
          <option>Todos</option>
          <option>Positivos</option>
          <option>Más o menos</option>
          <option>Negativos</option>
        </select>
      </div>

      <div class="comment">
        <div class="avatar" style="background: #12f693;">A</div>
        <div class="comment-content">
          <h4>Alumno 1 <span style="float:right; color:#94a3b8">23 abr. 2024 - 22:21</span></h4>
          <p>Muy buena clase, el profesor explicó todo de forma clara.</p>
        </div>
      </div>

      <div class="comment">
        <div class="avatar" style="background: #00f7ff;">B</div>
        <div class="comment-content">
          <h4>Alumno 2 <span style="float:right; color:#94a3b8">23 abr. 2024 - 22:10</span></h4>
          <p>La clase estuvo bien, aunque podría mejorar en algunos aspectos.</p>
        </div>
      </div>

      <div class="comment">
        <div class="avatar" style="background: #cf30ff;">C</div>
        <div class="comment-content">
          <h4>Alumno 3 <span style="float:right; color:#94a3b8">23 abr. 2024 - 21:36</span></h4>
          <p>No me gustó esta clase.</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts para los gráficos -->
  <script>
    const rateCtx = document.getElementById('rateChart').getContext('2d');
    const votersCtx = document.getElementById('votersChart').getContext('2d');
    const balanceCtx = document.getElementById('balanceChart').getContext('2d');

    new Chart(rateCtx, {
      type: 'line',
      data: {
        labels: ['Clase 0', 'Clase 1', 'Clase 2', 'Clase 3', 'Clase 4', 'Clase 5', 'Clase 6', 'Clase 7', 'Clase 8', 'Clase 9', 'Clase 10', 'Clase 11', 'Clase 12', 'Clase 13', 'Clase 14', 'Clase 15', 'Clase 16', 'Clase 17', 'Clase 18', 'Clase 19', 'Clase 20', 'Clase 21'],
        datasets: [{
          label: 'Puntuación promedio',
          data: [4.1, 4.3, 3.8, 4.5, 4.2, 4.6, 4.4, 3.9, 4.0, 4.1, 4.3, 4.2, 3.7, 4.5, 4.1, 4.6, 4.3, 4.0, 3.9, 4.2, 4.1, 4.4],
          backgroundColor: '#00f7ff50',
          borderColor: '#00f7ff',
          borderWidth: 2,
          tension: 0.3,
          pointBackgroundColor: '#00f7ff',
          pointRadius: 5
        }]
      },
      options: {
        scales: {
          y: {
            min: 1,
            max: 5,
            ticks: { color: '#e2e8f0' },
            grid: { color: '#334155' }
          },
          x: {
            ticks: { color: '#e2e8f0' },
            grid: { color: '#334155' }
          }
        },
        plugins: {
          legend: { labels: { color: '#12f693' } }
        }
      }
    });

    new Chart(votersCtx, {
      type: 'bar',
      data: {
        labels: ['Clase 0', 'Clase 1', 'Clase 2', 'Clase 3', 'Clase 4', 'Clase 5', 'Clase 6', 'Clase 7', 'Clase 8', 'Clase 9', 'Clase 10', 'Clase 11', 'Clase 12', 'Clase 13', 'Clase 14', 'Clase 15', 'Clase 16', 'Clase 17', 'Clase 18', 'Clase 19', 'Clase 20', 'Clase 21'],
        datasets: [{
          label: 'Cantidad de alumnos que valoraron',
          data: [90, 85, 78, 95, 88, 92, 75, 68, 55, 75, 80, 82, 70, 77, 65, 60, 73, 69, 91, 87, 66, 79],
          backgroundColor: '#cf30ff'
        }]
      },
      options: {
        scales: {
          y: {
            ticks: { color: '#e2e8f0' },
            grid: { color: '#334155' }
          },
          x: {
            ticks: { color: '#e2e8f0' },
            grid: { color: '#334155' }
          }
        },
        plugins: {
          legend: { labels: { color: '#cf30ff' } }
        }
      }
    });

    new Chart(balanceCtx, {
      type: 'bar',
      data: {
        labels: ['Clase 0', 'Clase 1', 'Clase 2', 'Clase 3', 'Clase 4', 'Clase 5', 'Clase 6', 'Clase 7', 'Clase 8', 'Clase 9', 'Clase 10', 'Clase 11', 'Clase 12', 'Clase 13', 'Clase 14', 'Clase 15', 'Clase 16', 'Clase 17', 'Clase 18', 'Clase 19', 'Clase 20', 'Clase 21'],
        datasets: [{
          label: 'Puntaje sobre 5',
          data: [4.1, 4.3, 3.8, 4.5, 4.2, 4.6, 4.4, 3.9, 4.0, 4.1, 4.3, 4.2, 3.7, 4.5, 4.1, 4.6, 4.3, 4.0, 3.9, 4.2, 4.1, 4.4],
          backgroundColor: '#12f693',
          borderRadius: 8
        }]
      },
      options: {
        responsive: true,
        scales: {
          y: {
            suggestedMin: 0,
            suggestedMax: 5,
            ticks: {
              color: '#e2e8f0'
            },
            grid: {
              color: '#334155'
            }
          },
          x: {
            ticks: {
              color: '#e2e8f0',
              maxRotation: 90,
              minRotation: 45
            },
            grid: {
              color: '#1e293b'
            }
          }
        },
        plugins: {
          legend: {
            display: false
          },
          tooltip: {
            backgroundColor: '#0f172a',
            titleColor: '#12f693',
            bodyColor: '#e2e8f0'
          }
        }
      }
    });
  </script>

</body>
</html>
{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Entrega de Proyecto Final</title>
  <link rel="shortcut icon" href="{% static 'img/logo-marema.png' %}" type="image/x-icon">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" />
  <link rel="stylesheet" href="{% static 'css/styles.css' %}">
  <style>


/* ******************************************************************
   Navbar - Estilos Generales
******************************************************************* */

.navbar {
  background-color: #111;
  position: relative;
  z-index: 10;
  border-bottom: 3px solid transparent;
  font-size: 1.2rem;
}

/* Efecto Ne√≥n Cyberpunk */
.navbar::after {
  content: "";
  position: absolute;
  bottom: 0;
  left: 0;
  height: 3px;
  width: 100%;
  background: linear-gradient(90deg, #12f693, #cf30ff, #12f693);
  animation: neonGlow 4s linear infinite;
  background-size: 200% auto;
}

@keyframes neonGlow {
  0% { background-position: 0% }
  100% { background-position: 100% }
}

/* ******************************************************************
   Navbar - Marca del Sitio (Logo)
******************************************************************* */

.navbar-brand {
  display: flex;
  align-items: center;
  font-weight: bold;
  font-size: 1.3rem;
}

.navbar-brand span.white {
  color: #fff;
}

.navbar-brand span.green {
  color: #12f693;
}

.navbar-brand img {
  height: 30px;
  margin-left: 10px;
}

/* ******************************************************************
   Navbar - Enlaces de Navegaci√≥n
******************************************************************* */

.navbar-nav .nav-link {
  color: #fff !important;
  transition: 0.3s;
}

.navbar-nav .nav-link:hover {
  color: #12f693 !important;
}

.nav-link.active {
  border-bottom: 2px solid #12f693;
}

/* ******************************************************************
   Navbar - Botones Personalizados
******************************************************************* */

/* Bot√≥n Login */
.btn-login {
  margin-left: 10px;
  background-color: #12f693;
  color: #000;
  font-weight: bold;
  border: none;
  transition: 0.3s;
  font-size: 1.3rem;
}

.btn-login:hover {
  background-color: #0cd680;
  color: #000;
}

/* Bot√≥n Inscripci√≥n */
.btn-inscripcion {
  margin-left: 10px;
  background-color: #cf30ff;
  color: #fff;
  font-weight: bold;
  border: none;
  transition: 0.3s;
  font-size: 1.3rem;
}

.btn-inscripcion:hover {
  background-color: #a120cc;
  color: #fff;
}

/* ******************************************************************
   Navbar - Men√∫ Hamburguesa
******************************************************************* */

.navbar-toggler {
  border-color: #12f693;
}

.navbar-toggler:focus,
.navbar-toggler:active,
.navbar-toggler.collapsed:focus {
  outline: none;
  box-shadow: none;
}

.navbar-toggler-icon {
  background-image: url("data:image/svg+xml;charset=utf8,%3Csvg viewBox='0 0 30 30' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath stroke='%2312f693' stroke-width='2' stroke-linecap='round' stroke-miterlimit='10' d='M4 7h22M4 15h22M4 23h22'/%3E%3C/svg%3E");
}

/* ******************************************************************
   Barra de Bienvenida
******************************************************************* */

.barra-bienvenida {
  background-color: #121212;
  color: #12f693;
  text-align: center;
  padding: 10px 20px;
  font-size: 1.1rem;
  border-bottom: 2px solid #12f693;
  position: relative;
  z-index: 99;
}



    body {
      background-color: #111;
      color: white;
      font-family: Arial, sans-serif;
    }

    .container {
      max-width: 900px;
      margin: auto;
      background: #222;
      padding: 40px;
      border-radius: 15px;
      box-shadow: 0 0 20px #12f693;
      margin: 40px 20px;
    }

    h1 {
      text-align: center;
      color: #12f693;
      margin-bottom: 30px;
    }

    .badge-marema{
        font-size: 20px;
    }

    label {
      font-weight: bold;
      margin-top: 20px;
      display: block;
    }

    input[type="text"],
    input[type="url"],
    input[type="file"],
    textarea {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      border-radius: 8px;
      background-color: #333;
      color: white;
      border: none;
    }

    textarea {
      resize: vertical;
    }

    .boton-submit {
      background-color: #12f693;
      color: black;
      padding: 12px 25px;
      border: none;
      border-radius: 8px;
      font-weight: bold;
      font-size: 16px;
      margin-top: 30px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    .boton-submit:hover {
      background-color: #0bd68f;
    }

    fieldset {
      margin-top: 30px;
      border: 1px solid #555;
      border-radius: 8px;
      padding: 20px;
    }

    legend , strong {
      font-weight: bold;
      color: #12f693;
      padding: 0 10px;
    }

    .errorlist {
      color: #ff5959;
      margin-bottom: 10px;
    }
  </style>
</head>
<body>

<!-- NAVBAR -->
<nav class="navbar navbar-expand-lg navbar-dark px-3">
  <div class="container-fluid">
    <!-- LOGO -->
    <a class="navbar-brand" href="#">
      <span class="white">Tecno</span><span class="green">Marema</span>
      <img src="{% static 'img/logo-marema.png' %}" alt="Logo">
    </a>

    <!-- HAMBURGUESA -->
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarContenido" style="border: none !important;">
      <i class="bi bi-three-dots-vertical" style="color: #12f693 !important;"></i>
    </button>

    <!-- MEN√ö -->
    <div class="collapse navbar-collapse" id="navbarContenido">
      <ul class="navbar-nav ms-auto mb-2 mb-lg-0 align-items-lg-center">
        <li class="nav-item"><a class="nav-link" href="{% url 'curso_detalle' comision.id_comision %}">Volver al curso</a></li>
        <li class="nav-item"><a class="nav-link" href="{% url 'mis_cursos' %}">Mis cursos</a></li>
        <li class="nav-item"><a class="nav-link" href="{% url 'cursos' %}">Cursos</a></li>
        <li class="nav-item"><a class="nav-link" href="{% url 'perfil' %}">Mi perfil</a></li>
        <li class="nav-item"><a class="nav-link" href="{% url 'saldo' %}">Saldo</a></li>
        <li class="nav-item"><a class="nav-link" href="{% url 'faq' %}">FAQ</a></li>
        <li class="nav-item"><a class="nav-link" href="{% url 'redes' %}">Redes</a></li>
        <li class="nav-item"><a class="nav-link" href="{% url 'contacto' %}">Contacto</a></li>
        <li class="nav-item">
        <!-- <a href="{% url 'logout' %}" class="btn btn-login btn-sm"><i class="bi bi-person-badge"></i>Cerrar sesi√≥n</a> -->
        <form action="{% url 'logout' %}" method="post" class="d-inline">
            {% csrf_token %}
            <button type="submit" class="btn btn-login btn-sm">
                <i class="bi bi-person-badge"></i>
                Cerrar sesi√≥n
            </button>
        </form>
        </li>
      </ul>
    </div>
  </div>
</nav>

<div class="barra-bienvenida">
    Bienvenido {{ nombre_usuario|capfirst }} a <strong>TecnoMarema üöÄ</strong>
</div>

<div class="container mt-4 mx-auto d-block">
    <h1>Entrega de Proyecto Final</h1>

<!-- CONSIGNA -->
<section class="mb-4 p-4" style="background-color: #333; border-radius: 12px;">
  <h2 style="color: #12f693;">üìå Consigna del Proyecto</h2>
  <p style="padding: 20px;">
    {{ comision.id_curso.consigna_proyecto|default:"A√∫n no se carg√≥ la consigna."|safe }}
  </p>
<div class="rounded p-3" style="background-color: #cf30ff; border-radius: 12px;">
  <strong class="text-dark d-block mb-2">üìå ATENCI√ìN A LA FECHA DE ENTREGA!!! ‚ö†</strong>
  <div>
    <span class="badge bg-light text-dark me-2">üìÜ Inicio de entrega:</span>
    {{ comision.fecha_fin|date:"j F Y" }}
  </div>
  <div>
    <span class="badge bg-light text-dark me-2">‚è≥ Cierre de entrega:</span>
    {{ fecha_limite|date:"j F Y" }} a las 23:59 hs
  </div>
</div>


</section>

<!-- INFORMACI√ìN Y EVALUACI√ìN -->
<div class="row">
  <!-- IZQUIERDA: Info alumno y nota -->
  <div class="col-md-6">
    <div class="p-4" style="background-color: #333; border-radius: 12px;">
      <p>üéì<strong style="color: #12f693;">Curso:</strong> {{ curso.nombre_curso }}</p>
      <p>üßæ<strong style="color: #12f693;">Comisi√≥n:</strong> {{ comision.numero_comision }}</p>
      <p>üë®‚Äçüéì<strong style="color: #12f693;">Alumno:</strong> {{ estudiante.nombre }} {{ estudiante.apellido }}</p>
      <p>üìÖ<strong style="color: #12f693;">Entregado:</strong> {{ entrega_existente.fecha_entrega|date:"d/m/Y H:i" }}</p>
      {% if entrega_existente.nota %}
        <p>üìù<strong style="color: #12f693;">Nota:</strong> {{ entrega_existente.nota }}</p>
      {% endif %}
    </div>
  </div>

  <!-- DERECHA: Feedback -->
  <div class="col-md-6 mt-4 mt-md-0">
    <div class="p-4" style="background-color: #333; border-radius: 12px;">
      <h5 style="color: #12f693;">üí¨ Feedback del Profesor</h5>
      {% if entrega_existente.feedback %}
        <p>{{ entrega_existente.feedback }}</p>
      {% else %}
        <p>No se ha cargado feedback a√∫n.</p>
      {% endif %}
    </div>
  </div>
</div>


  <form method="post" enctype="multipart/form-data">
    {% csrf_token %}

    {{ form.non_field_errors }}

    <label for="{{ form.titulo.id_for_label }}">T√≠tulo del Proyecto</label>
    {{ form.titulo.errors }}
    {{ form.titulo }}

    <label for="{{ form.descripcion.id_for_label }}">Descripci√≥n</label>
    {{ form.descripcion.errors }}
    {{ form.descripcion }}

    <fieldset>
      <legend>üîó Enlaces</legend>
      <label for="{{ form.link_github.id_for_label }}">Link GitHub</label>
      {{ form.link_github.errors }}
      {{ form.link_github }}

      <label for="{{ form.link_pages.id_for_label }}">Link GitHub Pages</label>
      {{ form.link_pages.errors }}
      {{ form.link_pages }}

      <label for="{{ form.link_servidor.id_for_label }}">Link del Servidor</label>
      {{ form.link_servidor.errors }}
      {{ form.link_servidor }}

      <label for="{{ form.link_adicional.id_for_label }}">Otro Enlace (Drive, etc.)</label>
      {{ form.link_adicional.errors }}
      {{ form.link_adicional }}
    </fieldset>

    <fieldset>
      <legend>üìé Archivos</legend>
      <label for="{{ form.archivo_1.id_for_label }}">Archivo Adicional 1</label>
      {{ form.archivo_1.errors }}
      {{ form.archivo_1 }}

      <label for="{{ form.archivo_2.id_for_label }}">Archivo Adicional 2</label>
      {{ form.archivo_2.errors }}
      {{ form.archivo_2 }}

      <label for="{{ form.archivo_3.id_for_label }}">Archivo Adicional 3</label>
      {{ form.archivo_3.errors }}
      {{ form.archivo_3 }}
    </fieldset>

    <fieldset>
      <legend>üì∑ Multimedia</legend>
      <label for="{{ form.imagen.id_for_label }}">Imagen del Proyecto</label>
      {{ form.imagen.errors }}
      {{ form.imagen }}

      <label for="{{ form.video.id_for_label }}">Video del Proyecto</label>
      {{ form.video.errors }}
      {{ form.video }}

      <label for="{{ form.audio.id_for_label }}">Audio del Proyecto</label>
      {{ form.audio.errors }}
      {{ form.audio }}
    </fieldset>

    <label for="{{ form.comentarios_adicionales.id_for_label }}">üìù Comentarios Adicionales</label>
    {{ form.comentarios_adicionales.errors }}
    {{ form.comentarios_adicionales }}

    <button type="submit" class="boton-submit">üì§ Enviar Entrega</button>
  </form>
</div>







<!-- ‚úÖ MODAL DE CONFIRMACI√ìN -->
<div class="modal fade" id="modalConfirmacion" tabindex="-1" aria-labelledby="modalConfirmacionLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content" style="background-color: #222; color: white; border: 2px solid #12f693;">
      <div class="modal-header">
        <h5 class="modal-title" id="modalConfirmacionLabel">‚úÖ Entrega Exitosa</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Cerrar"></button>
      </div>
      <div class="modal-body">
        Tu entrega fue registrada correctamente. ¬°Gracias por subir tu proyecto!
      </div>
      <div class="modal-footer d-flex justify-content-end">
        <a href="{% url 'curso_detalle' id_comision=comision.id_comision %}" class="btn btn-success">Aceptar y volver al curso</a>
      </div>
    </div>
  </div>
</div>



<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script>
  window.addEventListener('DOMContentLoaded', () => {
    const urlParams = new URLSearchParams(window.location.search);
    if (urlParams.get('entregado') === '1') {
      const modal = new bootstrap.Modal(document.getElementById('modalConfirmacion'));
      modal.show();
    }
  });
</script>


</body>
</html>
